# AI智能记账小程序 - 配置指南

## 🚨 解决"没有权限，请先开通云开发或者云托管"错误

### 方法一：使用现有云开发环境（推荐）

1. **在微信开发者工具中打开项目**
2. **点击顶部工具栏的"云开发"按钮**
3. **选择"使用现有环境"**
4. **输入环境ID：`cloud1-4g0v6uhy5c7dc674`**
5. **点击"确定"关联环境**

### 方法二：创建新的云开发环境

1. **点击"云开发"按钮**
2. **选择"开通云开发"**
3. **填写环境名称：AI记账**
4. **选择计费模式：个人版（免费）**
5. **点击"开通"**
6. **复制生成的环境ID**
7. **修改 `miniprogram/app.js` 第9行，替换环境ID**

### 📤 部署云函数

**必须在微信开发者工具中完成：**

1. **部署 getOpenId 云函数**：
   - 右键 `cloudfunctions/getOpenId` 文件夹
   - 选择"上传并部署：云端安装依赖"
   - 等待绿色部署成功提示

2. **部署 parseExpense 云函数**：
   - 右键 `cloudfunctions/parseExpense` 文件夹  
   - 选择"上传并部署：云端安装依赖"
   - 等待绿色部署成功提示

### 🗄️ 创建数据库集合

1. **在云开发控制台**（工具内或网页版）
2. **进入"数据库"**
3. **点击"添加集合"**
4. **集合名称：`expenses`**
5. **确认创建**

### 🔧 权限配置

如果仍有权限问题：

1. **检查 AppID 是否正确**
2. **确认小程序已绑定到您的账号**
3. **在小程序后台开启云开发服务**

### ✅ 验证配置成功

配置完成后，应该看到：
- 首页显示用户信息和统计数据
- 可以正常进行语音记账
- 记录列表显示数据
- 统计页面显示图表

### 🆘 常见问题

**Q: 提示"云函数不存在"**
A: 确保已上传云函数到云端，不是仅本地存在

**Q: 提示"数据库权限不足"**  
A: 检查数据库集合是否已创建，权限设置是否正确

**Q: 语音记账不工作**
A: 确保已授权录音权限，并且 parseExpense 云函数已部署

---

配置完成后，您就可以体验完整的AI智能记账功能了！🎉 